<!DOCTYPE html>
<html>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- Google Fonts -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>


<link rel="stylesheet" type="text/css" href="css/index.css">

<head>
    <title>Rev</title>
    <link rel="shortcut icon" type="image/png" href="#"/>
    <style>

body {
    font-family: 'Open Sans', sans-serif;
}

</style>
</head>
<body>

    <!-- Test form for RTM -->
    <div class="primary">
        <!-- Navbar -->
        <div class="topBar">
            <div class="topBarContainer">
                <div class="leftContainer">
                    <div class="logo">
                        <img class="directlyLogo" src="img/directly-demo.png" alt="directly-logo"/>
                    </div>
                </div>
                <div class="rightContainer">
                    <div class="linkLast">
                        <a href="https://github.com">Github</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="main">
            <div class="heading">
                <h1>Rev Custom RTM</h1>
            </div>
            <!-- Button to Open and Close RTM Widget */ -->
            <div class="directlyButtons">
                <div class="buttonContainer">
                    <button onclick="displayDirectlyForm()" class="btn btn-primary directlyButton">Open RTM</button>
                </div>
                <div class="buttonContainer">
                    <button onclick="hideDirectlyForm()" class="btn btn-primary directlyButton">Close RTM</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Directly RTM front end -->
    <div class="d-container" id="d-container-id">
        <div class="d-header">
            <h1 class="d-header-title">How can we help you?</h1>
            <p class="d-header-close" onclick="hideDirectlyForm()">X</p>
        </div>
        <div class="d-form-container">
            <form class="d-ask-form" action="#" onsubmit="DirectlyAsk()">
                <div class="d-input-group">
                    <label><strong>Name</strong></label>
                    <input id="name" type="text" placeholder="Type your name here" required>
                </div>
                <div class="d-input-group">
                    <label><strong>Email</strong></label>
                    <input id="email" type="email" placeholder="Type your email address here" required>
                </div>
                <div class="d-input-group">
                    <label><strong>Topics</strong></label>
                    <select name="customerDropdown" id="customerDropdown">
                        <option value="">Select the topic</option>
                        <option value="Transcription">Transcription</option>
                        <option value="Captioning">Captioning</option>
                    </select>
                    <span id="customerDropdownError" style="color:#D64550"></span>
                </div>
                <div class="d-input-group">
                    <label><strong>Your Question</strong></label>
                    <textarea id="body" type="text" placeholder="How can we help?" rows="3" required></textarea>
                </div>
                <div class="d-submit-group">
                    <button type="submit">
                        <strong>Send to our experts</strong>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Directly RTM javascript -->
    <link rel="stylesheet" type="text/css" href="css/directly.css">
    <script type="text/javascript">
        (function(d, i, r, e, c, t, l, y) {
            i[r] = i[r] || function () {
                (i[r].cq = i[r].cq || []).push(arguments)
            };
            l = d.createElement("script");
            l.id = "directlyRTMScript";
            l.src = e;
            l.async = 1;
            y = d.head || d.getElementsByTagName("head")[0];
            if (d.readyState === "complete" || d.readyState === "loaded" || d.readyState === "interactive") {
                y.appendChild(l);
            } else if (i.addEventListener) {
                i.addEventListener("DOMContentLoaded", function() { y.appendChild(l); });
            } else {
                i.attachEvent("onload", function() { y.appendChild(l); });
            }
        })(document, window, "DirectlyRTM", "https://www.directly.com/widgets/rtm/embed.js");

        DirectlyRTM("config",{id: "8aab5f796401349b01641e0f609613c6" });

        function displayDirectlyForm() {
            document.getElementById("d-container-id").style.display = "block";
        }

        function hideDirectlyForm() {
            document.getElementById("d-container-id").style.display = "none";
        }

        function DirectlyAsk() {
            var d_name = document.getElementById("name").value;
            var d_email = document.getElementById("email").value;
            var d_question = document.getElementById("body").value;
            var customerDropdown = document.getElementById("customerDropdown").value
            if (customerDropdown !== "Transcription" && customerDropdown !== "Captioning") {
                document.getElementById("customerDropdownError").innerHTML = "Please select Transcription or Captioning to continue."
                return;
            }
            DirectlyRTM("askQuestion", {
                questionText: d_question,
                name: d_name,
                email: d_email,
                metadata: {
                  topics: customerDropdown, "rtm":{"returnUrl":"Insert the returnURL here"}
                }
            });
            hideDirectlyForm();
            return false;
        }
    </script>


</body>
</html>
