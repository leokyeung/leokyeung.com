<!DOCTYPE html>
<html>
    <head>
        <title>Testing out icon look-and-feel change</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
       
        <script>
            /* BEGIN TEST SCRIPT */
            var initDirectly = function() {
                $("<style type='text/css'>#rtm_icon{background-color:#F35321;color:#fff;font-family:husqvarnaGothicLight;font-size:15px;padding:5px 13px;position:fixed;z-index:2000;left:0;top:66%;transform-origin:left bottom 0;transform:rotate(90deg);cursor:pointer;}</style>").appendTo("head");

                $('body').append('<div id="rtm_icon">Ask our experts</div>');
                var rtm_icon = $('#rtm_icon');
                var rtm_init = false;
                var current_path = null;
                rtm_icon.click(function(event) {
                    if (! rtm_init) {
                        //console.log('initializing rtm widget');
                        DirectlyRTM("onNavigate", function(path) {
                            //console.log('navigating to '+path.path);
                            if (path.path === '/minimized') {
                                rtm_icon.show();
                            } else {
                                current_path = path.path;
                                rtm_icon.hide();
                            }
                        });
                        rtm_init = true;
                    }
                    if (!current_path) {
                        DirectlyRTM("openAskForm");
                    } else {
                        DirectlyRTM("navigate", current_path);
                    }
                    rtm_icon.hide();
                })
            }

            $(document).ready(function() {
                $("<style type='text/css'>.directly-rtm {left:0!important;right:auto!important;}.directly-rtm.is-minimized {display:none!important;}</style>").appendTo("head");

                setTimeout(initDirectly, 5000);
            })
            /* END TEST SCRIPT */
        </script>
    </head>
    <body>
        <h1>Custom icon test</h1>
        <div style="height: 10000px;"></div>

        <script>
            (function(d, i, r, e, c, t, l, y) {
                i[r] = i[r] || function () {
                    (i[r].cq = i[r].cq || []).push(arguments)
                };
                l = d.createElement("script");
                l.id = "directlyRTMScript";
                l.src = e;
                l.async = 1;
                y = d.head || d.getElementsByTagName("head")[0];
                if (d.readyState === "complete" || d.readyState === "loaded" || d.readyState === "interactive") {
                    y.appendChild(l);
                } else if (i.addEventListener) {
                    i.addEventListener("DOMContentLoaded", function() { y.appendChild(l); });
                } else {
                    i.attachEvent("onload", function() { y.appendChild(l); });
                }
            })(document, window, "DirectlyRTM", "https://app.directly.com/widgets/rtm/embed.js");
            DirectlyRTM("config", {id: "2c99834e68147dcd01681ef24a246882"});

            // husq
            //DirectlyRTM("config",{ id: "2c99834e68147dcd01682eb920e2241b" });

        </script>
    </body>
</html>

