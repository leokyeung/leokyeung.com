<!DOCTYPE html>
<html>
<head>

    
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">

    <link rel="stylesheet" type="text/css" href="css/rtm.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Husq</title>

</head>
<body>
    
<script>
   var initDirectly = function() {
       var rtm_tab = $('#rtm_tab');

       setTimeout(function() {
           let style = should_show_tab() ? '' : 'display:none;';
           $('body').append('<div id="rtm_tab" style="'+style+'">Ask our CARE experts</div>');
           rtm_tab = $('#rtm_tab');
           rtm_tab.click(function(event) {
               DirectlyRTM("openAskForm");
           });
       }, 10000);

       var hide_tab = function() {
           rtm_tab.hide();
       }

       var show_tab = function() {
           rtm_tab.fadeIn(100);
       }

       var should_show_tab = function() {
           return $('.directly-rtm').hasClass('is-hidden');
       }

       DirectlyRTM("onNavigate", function(path) {
           hide_tab();
           if (path.path === '/minimized') {
               var count = 0;
               var checkIsMinimized = function() {
                   count++;
                   if ($('.directly-rtm').hasClass('is-minimized')) {
                       setTimeout(function() {
                           if (should_show_tab()) {
                               show_tab();
                           }
                       }, 300)
                   } else if (count < 100) {
                       setTimeout(checkIsMinimized, 50);
                   }
               }
               checkIsMinimized();
           }
       });
   }

   $(document).ready(function() {
       $("<style type='text/css'>.directly-rtm {left:0!important;right:auto!important;}.directly-rtm.is-minimized.hide-minimized {display:none!important;}</style>").appendTo("head");
       $("<style type='text/css'>#rtm_tab{background-color:#70B51A;color:#fff;font-family:husqvarnaGothicLight;font-size:15px;padding:5px 13px;position:fixed;z-index:2000;left:0;top:82%;transform-origin:left top 0;transform:rotate(-90deg);cursor:pointer;}</style>").appendTo("head");

       initDirectly();
   })
</script>



</body>
</html>
